<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.study.article.repository.ArticleRepository">

	<insert id="writeNewArticle" parameterType="kr.co.study.article.dto.ArticleDTO">
		INSERT INTO ARTICLE (	ARTICLE_ID,
								USER_NAME,
								TITLE, 
								CONTENTS, 
								LIKES_COUNT, 
								READS_COUNT, 
								WRITE_DATE )
		VALUES (	
			( 
				SELECT MAX(A.ARTICLE_ID)+1
				FROM ARTICLE A
			), 
			#{userName},
			#{title},
			#{contents},
			0,
			0,
			CURDATE() )
	</insert>
	
	<select id="getAllArticleList" resultType="kr.co.study.article.dto.ArticleDTO" >
		SELECT ARTICLE_ID articleId,
				USER_NAME userName,
				TITLE title,
				CONTENTS contents,
				LIKES_COUNT likesCount,
				READS_COUNT readsCount,
				WRITE_DATE writeDate
		FROM ARTICLE
	</select>
	
	<select id="getOneArticleByArticleId" parameterType="int" resultType="kr.co.study.article.dto.ArticleDTO">
		SELECT ARTICLE_ID articleId,
				USER_NAME userName,
				TITLE title,
				CONTENTS contents,
				LIKES_COUNT likesCount,
				READS_COUNT readsCount,
				WRITE_DATE writeDate
		FROM ARTICLE
		WHERE ARTICLE_ID = #{articleId}
	</select>
	
	<delete id="deleteArticleByArticleId" parameterType="int">
		DELETE FROM ARTICLE
		WHERE ARTICLE_ID = #{ articleId }
	</delete>
	
	<update id="updateArticleByArticleDTO" parameterType="kr.co.study.article.dto.ArticleDTO">	
		UPDATE ARTICLE SET
		TITLE = #{title},
		CONTENTS = #{contents}
		WHERE ARTICLE_ID = #{articleId}
	</update>
	

</mapper>